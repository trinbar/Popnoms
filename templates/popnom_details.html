{% extends 'base.html' %}

{% block title %}PopNoms{% endblock %}

<!-- {% block js %}
  
{% endblock %} -->

{% block content %}

<!-- Possible use of JS and React, do not delete until design period -->

    <!-- <div id="popnom-name"></div>

    <div id="root"></div> -->

        <!-- script src="https://unpkg.com/react@16/umd/react.development.js"   crossorigin></script>
        <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
        <script src="/static/popnomDetails.jsx" type="text/jsx"></script> -->

   <!--  <script>
        "use strict";

        let event_detail = JSON.parse(event);

        console.log(event_detail.name.text);

        function printValues(event_detail) {
            for (let k in event_detail) {
                if(event_detail[k] instanceof Object) {
                    printValues(event_detail[k]);
                } else {
                    document.write(event_detail[k] +"<br>");
                };
            }
        };

        printValues(event_detail)

        document.write(event_detail["name"]["text"] + "<br>");
    </script> -->
<div class ="row" style="margin:20px padding:10px;">
    <img src="{{ details["logo"] }}" style="width:8px height:5px;">
</div>

 <div class="row" style="margin:20px padding:10px;">

   <div class="col-xs-12 col-md-6">

    <h2> {{ details["name"] }}</h2>

    <p>{{ details["description"] }}</p>
    <p>{{ details["start_time"]}} to {{ details["end_time"]}} {{ details["end_time_tz"] }}</p>
</div>
   <div class="col-xs-12 col-md-6" id="buttons">
    <br><br><br>

        <form action="/heart" method="POST">
        
        <button class="btn btn-primary" type="heartButton" name="heartButton" status="unhearted"><3</button>
        <input type="hidden" name="heartEventId" value="{{ details["event_id"] }}">

            <script>
            "use strict";

            let heartButton = document.querySelector('#heartButton');
            let eventId = document.querySelector('#heartEventId');

            heartButton.addEventListener("click", function () {
                if (heartButton.innerText === "<3") {
                    heartButton.innerText = "</3";
                    heartButton.setAttribute("status", "hearted");
                } else {
                    heartButton.innerText = "<3";
                    heartButton.setAttribute("status", "unhearted");
                    eventId.setAttribute("value","");
                }
            });

            </script>
        </form>

        <button class="btn btn-primary" type="registerButton" name="registerButton" status="notGoing" data-eventid="{{ details["event_id"]}}">Not going</button>
         <input type="hidden" name="regEventId" value="{{ details["event_id"] }}">

            <script>
            "use strict";

            let registerButton = document.querySelector('#registerButton');

            registerButton.addEventListener("click", function () {
                if (registerButton.innerText === "Not going") {
                    registerButton.innerText = "Going";
                    registerButton.setAttribute("status", "going");
                } else {
                    registerButton.innerText = "Not going";
                    registerButton.setAttribute("status", "notGoing");
                }
            });

            </script>
        </form>

         <a href="{{ details["eb_url"] }}" class="btn btn-primary ">Buy Tickets</a>
     </div>
 </div>
 
{% endblock %}