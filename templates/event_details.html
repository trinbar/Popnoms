{% extends 'base.html' %}

{% block title %}PopNoms{% endblock %}

<!-- {% block js %}
  
{% endblock %} -->

{% block content %}

<div class ="row" style="margin:20px padding:10px;">
    <img src="{{ details["logo"] }}" style="width:8px height:5px;">
</div>

 <div class="row" style="margin:20px padding:10px;">

   <div class="col-xs-12 col-md-6">

    <h2> {{ details["name"] }}</h2>

    <p>{{ details["description"] }}</p>
    <p>{{ details["start_time"]}} to {{ details["end_time"]}} {{ details["end_time_tz"] }}</p>
</div>
   <div class="col-xs-12 col-md-6">
    <br><br><br>

     {% if "user_id" in session %}
        <h3>
            Bookmark Event
        </h3>
        <form action="/bookmark_event" method="POST">
        <input type="radio" class="bookmark" name="going_bookmark" value="going" data-eventid={{ details["event_id"] }} {% if bookmark and bookmark.bookmark_type == "going" %} checked {% endif %}>  I'm Going!

        <input type="radio" class="bookmark" name="interested_bookmark" value="interested" data-eventid={{ details["event_id"] }} {% if bookmark and bookmark.bookmark_type == "inter" %} checked {% endif %}>  Interested

          <script>
        "use strict";
        function validateForm() {
            let bookmark = document.querySelector("bookmark");
            if (bookmark.checked == true) {
                console.log("true")
                return true;
             } else {
                console.log("false")
                return false
               }
        }

        $(document).ready(
            function() {
            $(".bookmark").on("click", function(evt) {
              let eventId = $(this).attr("data-eventid");
              let bookmarkType = $(this).attr("value");
              let payload = {"event_id": eventId,
                           "bookmark_type": bookmarkType};
                console.log(payload)

              $.post("/bookmark_event", payload, validateForm);
            });

        });
        </script>
        </form>
            
<!-- 
        <input class="bookmark" id="interested_button" type="radio" name="bookmark" value="interested" data-eventid="{{ details.event_id }}" data-status="interested" {% if bookmark and bookmark.bookmark_type == "interested" %} checked {% endif %}/>
        <label for="interested_button">
            Interested
        </label>
        </form> -->
        
    {% endif %}

         <a href="{{ details["eb_url"] }}" class="btn btn-primary ">Buy Tickets from Eventbrite</a>
     </div>
 </div>
 
{% endblock %}